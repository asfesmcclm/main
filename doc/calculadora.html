<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Orientativa UGT - Sandbox</title>
    <style>
        :root { 
            --ugt-red: #e30613; 
            --ugt-green: #166534;
            --bg-green: #f0fdf4;
            --bg-gray: #f8f9fa; 
        }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: #e9ecef; 
            padding: 15px; 
            color: #333; 
        }

        .container { max-width: 550px; margin: auto; }

        .card { 
            background: white; 
            padding: 22px; 
            border-radius: 15px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.1); 
            margin-bottom: 20px; 
        }

        h3 { 
            color: var(--ugt-red); 
            margin-top: 0; 
            font-size: 1.2rem; 
            border-bottom: 2px solid #eee; 
            padding-bottom: 10px; 
        }

        .form-group { margin-bottom: 18px; }

        label { 
            display: block; 
            font-weight: 700; 
            margin-bottom: 8px; 
            font-size: 0.9rem; 
        }

        input[type="date"], 
        input[type="number"], 
        select { 
            width: 100%; 
            padding: 12px; 
            border: 1px solid #ccc; 
            border-radius: 8px; 
            box-sizing: border-box; 
            font-size: 1rem; 
        }

        /* Estilo para Radio Buttons */
        .radio-group { 
            display: flex; 
            gap: 15px; 
            background: var(--bg-gray); 
            padding: 10px; 
            border-radius: 8px; 
            margin-bottom: 15px; 
        }

        .radio-group label { 
            font-weight: normal; 
            display: flex; 
            align-items: center; 
            gap: 5px; 
            cursor: pointer; 
            margin-bottom: 0; 
        }

        /* Alertas y Feedback en vivo */
        .info-box { 
            background: #fdf2f2; 
            border-left: 4px solid var(--ugt-red); 
            padding: 12px; 
            border-radius: 4px; 
            font-size: 0.85rem; 
            color: #b91c1c; 
            line-height: 1.4; 
        }

        .info-live { 
            margin-top: 10px; 
            padding: 10px; 
            background: var(--bg-green); 
            border: 1px dashed #bbf7d0; 
            border-radius: 8px; 
            font-size: 0.9rem; 
            color: var(--ugt-green); 
            display: none; 
        }

        button { 
            background: var(--ugt-red); 
            color: white; 
            border: none; 
            width: 100%; 
            padding: 16px; 
            border-radius: 10px; 
            font-weight: bold; 
            font-size: 1.1rem; 
            cursor: pointer; 
            box-shadow: 0 4px 6px rgba(227, 6, 19, 0.2); 
        }

        button:hover { background: #b3050f; }

        #resultado { 
            display: none; 
            margin-top: 25px; 
            padding: 20px; 
            background: #343a40; 
            color: white; 
            border-radius: 12px; 
        }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <h3>1. Cronología Laboral</h3>
        <div class="form-group">
            <label>Fecha de inicio del contrato</label>
            <input type="date" id="f_inicio">
        </div>
        <div class="form-group">
            <label>Fecha de finalización / cese</label>
            <input type="date" id="f_fin">
        </div>
        <div id="info_antiguedad" class="info-live">
            Antigüedad detectada: <strong id="val_antiguedad">---</strong>
        </div>
    </div>

    <div class="card">
        <h3>2. Percepciones Salariales</h3>
        
        <label>Tipo de salario bruto introducido:</label>
        <div class="radio-group">
            <label><input type="radio" name="tipo_s" value="diario" onchange="actualizarSalario()"> Diario</label>
            <label><input type="radio" name="tipo_s" value="mensual" checked onchange="actualizarSalario()"> Mensual</label>
            <label><input type="radio" name="tipo_s" value="anual" onchange="actualizarSalario()"> Anual</label>
        </div>

        <div class="form-group">
            <label>Importe Bruto (€)</label>
            <input type="number" id="s_importe" placeholder="Ej: 1850.50" oninput="actualizarSalario()">
        </div>

        <div id="info_salario_anual" class="info-live" style="margin-bottom: 15px;">
            Salario bruto anual estimado: <strong id="val_salario_anual">---</strong>
        </div>

        <div class="info-box">
            <strong>Rigurosidad en el cálculo:</strong><br>
            El importe debe ser el <strong>total antes de impuestos</strong> (IRPF y SS). Incluye salario base y todos los complementos salariales. 
            <br><br>
            Si tus pagas extras NO están prorrateadas, asegúrate de sumar su parte proporcional al total anual para una indemnización correcta.
        </div>
    </div>

    <button onclick="mostrarCalculos()">GENERAR INFORME ORIENTATIVO</button>

    <div id="resultado">
        <h4 style="margin-top:0">Resultados Preliminares</h4>
        <div id="res_data"></div>
        <p style="font-size: 0.8rem; color: #ccc; margin-top: 15px;">
            Este cálculo es una ayuda técnica. Las particularidades de tu Convenio Colectivo pueden variar estas cifras. Acude a tu sede de UGT para un cálculo vinculante.
        </p>
    </div>
</div>

<script>
    // 1. Lógica de Antigüedad "en vivo"
    function actualizarAntiguedad() {
        const fi = new Date(document.getElementById('f_inicio').value);
        const ff = new Date(document.getElementById('f_fin').value);
        const display = document.getElementById('info_antiguedad');

        if (fi.getTime() && ff.getTime()) {
            const diff = ff - fi;
            if (diff < 0) {
                document.getElementById('val_antiguedad').innerText = "Revisa las fechas.";
                return;
            }
            const diasTotales = Math.floor(diff / (1000 * 60 * 60 * 24));
            const anios = Math.floor(diasTotales / 365);
            const diasResto = diasTotales % 365;
            
            document.getElementById('val_antiguedad').innerText = `${anios} años y ${diasResto} días`;
            display.style.display = 'block';
        }
    }

    // 2. Lógica de Salario "en vivo"
    function actualizarSalario() {
        const importe = parseFloat(document.getElementById('s_importe').value.replace(',', '.')) || 0;
        const tipo = document.querySelector('input[name="tipo_s"]:checked').value;
        const display = document.getElementById('info_salario_anual');
        
        let anual = 0;
        if (importe > 0) {
            if (tipo === 'diario') anual = importe * 365;
            else if (tipo === 'mensual') anual = importe * 12;
            else anual = importe;

            document.getElementById('val_salario_anual').innerText = anual.toLocaleString('es-ES', { style: 'currency', currency: 'EUR' });
            display.style.display = 'block';
        }
    }

    // 3. Procesar Informe
    function mostrarCalculos() {
        const fi = new Date(document.getElementById('f_inicio').value);
        const ff = new Date(document.getElementById('f_fin').value);
        const importe = parseFloat(document.getElementById('s_importe').value.replace(',', '.')) || 0;
        const tipo = document.querySelector('input[name="tipo_s"]:checked').value;

        if (!fi.getTime() || !ff.getTime() || importe <= 0) {
            alert("Por favor, completa los datos mínimos.");
            return;
        }

        let anual = (tipo === 'diario') ? importe * 365 : (tipo === 'mensual' ? importe * 12 : importe);
        let s_dia = anual / 365;
        let diff = Math.floor((ff - fi) / (1000 * 60 * 60 * 24));
        let anios = diff / 365;

        let html = `
            <div style="display:flex; justify-content:space-between"><span>Antigüedad:</span> <span>${anios.toFixed(2)} años</span></div>
            <div style="display:flex; justify-content:space-between"><span>Salario Día:</span> <span>${s_dia.toFixed(2)} €</span></div>
            <hr>
            <div style="display:flex; justify-content:space-between; color:#00ff88"><strong>Despido Improcedente:</strong> <span>${(s_dia * 33 * anios).toFixed(2)} €</span></div>
        `;
        
        document.getElementById('res_data').innerHTML = html;
        document.getElementById('resultado').style.display = 'block';
        document.getElementById('resultado').scrollIntoView({ behavior: 'smooth' });
    }

    // Escuchadores
    document.getElementById('f_inicio').addEventListener('change', actualizarAntiguedad);
    document.getElementById('f_fin').addEventListener('change', actualizarAntiguedad);
</script>

</body>
</html>
